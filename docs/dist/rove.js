(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.rove = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),History=function(){function e(t){_classCallCheck(this,e),this.onNavigation=t,this._window=window,this.strategy=this._strategy(),this.onChange=this._onChange.bind(this)}return _createClass(e,[{key:"_strategy",value:function(){return this._window.history&&this._window.history.pushState?"push":"onhashchange"in this._window?"hash":"poll"}},{key:"externalizeUrl",value:function(e,t){return"push"===this.strategy?t:e+"#!"+t.slice(e.length)}},{key:"internalizeUrl",value:function(e,t){if("push"===this.strategy)return t;var s=e+"#!";return 0!==t.indexOf(s)?t:""+e+t.slice(s.length)}},{key:"_onChange",value:function(){var e=void 0;switch(this.strategy){case"push":var t=this._window.location,s=t.href,a=t.origin;e=s.slice(a.length);break;case"hash":case"poll":e=this._window.location.hash.slice(2)}this.onNavigation(e)}},{key:"update",value:function(e,t,s){switch(this.strategy){case"push":s?this._window.history.replaceState({},t,e):this._window.history.pushState({},t,e);break;case"hash":case"poll":this._window.location.hash="#!"+e}}},{key:"attach",value:function(){var e=this;switch(this.strategy){case"push":this._window.addEventListener("popstate",this.onChange);break;case"hash":this._window.addEventListener("hashchange",this.onChange);break;case"poll":this._hashPoll=setTimeout(function(){var t=e._previousHashPoll,s=e._window.location.hash;t&&t!==s&&e.onChange(),e._previousHashPoll=s},300)}}},{key:"detach",value:function(){switch(this.strategy){case"push":this._window.removeEventListener("popstate",this.onChange);break;case"hash":this._window.removeEventListener("hashchange",this.onChange);break;case"poll":clearInterval(this._hashPoll)}}}]),e}();exports.default=History;

},{}],2:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _router=require("./router"),_router2=_interopRequireDefault(_router);exports.default=_router2.default;

},{"./router":3}],3:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_powerAssertRecorder=function(){function t(){this.captured=[]}return t.prototype._capt=function(t,e){return this.captured.push({value:t,espath:e}),t},t.prototype._expr=function(t,e){var i=this.captured;return this.captured=[],{powerAssertContext:{value:t,events:i},source:e}},t}(),_history2=require("./history"),_history3=_interopRequireDefault(_history2),_routingTable=require("./routing-table"),_routingTable2=_interopRequireDefault(_routingTable),_util=require("./util"),Router=function(){function t(e,i,n,r){new _powerAssertRecorder,new _powerAssertRecorder;_classCallCheck(this,t),"string"==typeof e&&"string"==typeof i||(r=n,n=i,i=e,e=""),this._basePath="/"+e,this._routingTable=new _routingTable2.default(e,i,n,r),this._isClientSide="object"===("undefined"==typeof window?"undefined":_typeof(window)),this._isClientSide&&(this._navigationListeners=[],this._interceptLinkClicks=!1,this.onClick=this._onClick.bind(this),this._document=window.document,this._location=window.location)}return _createClass(t,[{key:"getRouteUrl",value:function(t){return this._externalizeUrl(this._routingTable.getUrlForRoute(t))}},{key:"getUrlRoute",value:function(t){return this._routingTable.getRouteForUrl(this._internalizeUrl(t))}},{key:"isRouteEqual",value:function(t,e){var i=this.getRouteUrl(t),n=this.getRouteUrl(e);return!(!i||!n||i!==n)}},{key:"isRouteWithin",value:function(t,e){var i=this.getRouteUrl(t),n=this.getRouteUrl(e);if(!i||!n||i===n)return!1;var r=(0,_util.getPath)(i),o=(0,_util.getPath)(n),a=(0,_util.getQuery)(n);if(!a)return 0===r.indexOf(o);var s=(0,_util.decodeQueryParams)((0,_util.getQuery)(i));return(0,_util.isProperSubset)((0,_util.decodeQueryParams)(a),s)}},{key:"_clientMethod",value:function(t){new _powerAssertRecorder,this._isClientSide}},{key:"_history",value:function(){var t=this;if(this._historyInstance)return this._historyInstance;this._historyInstance=new _history3.default(function(e){var i=t.getUrlRoute(e);t.warnOnNavigation(!1),t._emitNavigation(i)}),this._historyInstance.attach()}},{key:"_externalizeUrl",value:function(t){if(!this._isClientSide)return t;this._history().externalizeUrl(this._basePath,t)}},{key:"_internalizeUrl",value:function(t){if(!this._isClientSide)return t;this._history().internalizeUrl(this._basePath,t)}},{key:"_navigateTo",value:function(t,e,i){e=e||this._document.title,i=i||!1,this._history().update(t,e,i)}},{key:"_emitNavigation",value:function(t){this._navigationListeners.forEach(function(e){return e(t)})}},{key:"onNavigation",value:function(t){var e=this;new _powerAssertRecorder;return this._clientMethod("onNavigation"),this._navigationListeners.push(t),function(){e._navigationListeners=e._navigationListeners.filter(function(e){return e!==t})}}},{key:"navigateTo",value:function(t){new _powerAssertRecorder,new _powerAssertRecorder;this._clientMethod("navigateTo");var e=this.getRouteUrl(t);this._navigateTo(e,null,t.replace)}},{key:"warnOnNavigation",value:function(t){if(this._navigationWarning=t,this._navigationWarning&&!this._beforeUnload){var e=this;this._beforeUnload=function(t){if(e._navigationWarning){var i=!0===e._navigationWarning?"":e._navigationWarning;return t.returnValue=i,i}},this._document.addEventListener("beforeunload",this._beforeUnload)}}},{key:"initialize",value:function(){this._clientMethod("initialize"),this._emitNavigation(this.getCurrentRoute())}},{key:"destroy",value:function(){this._clientMethod("destroy"),this.warnOnNavigation(!1),this._document.removeEventListener("beforeunload",this._beforeUnload),this.interceptLinkClicks(!1),this._history().detach()}},{key:"_onClick",value:function(t){this._clientMethod("onClick");for(var e=t.target;e&&"A"!==e.tagName.toUpperCase();)e=e.parentNode;if(e&&e.href&&"_blank"!==e.target){var i=this._location.origin,n=e.href.slice(i.length);0===n.indexOf(this._basePath)&&(t.preventDefault(),this._navigateTo(n,e.title))}}},{key:"interceptLinkClicks",value:function(t){if(this._clientMethod("interceptLinkClicks"),this._interceptLinkClicks)return void(t||(this._document.removeEventListener("click",this.onClick),this._interceptLinkClicks=!1));this._document.addEventListener("click",this.onClick),this._interceptLinkClicks=!0}},{key:"getCurrentRoute",value:function(){this._clientMethod("getCurrentRoute");var t=this._location,e=t.href,i=t.origin,n=e.slice(i.length);return this.getUrlRoute(n)}},{key:"isRouteActive",value:function(t){return this._clientMethod("isRouteActive"),this.isRouteEqual(this.getCurrentRoute(),t)}},{key:"isCurrentRouteWithin",value:function(t){return this._clientMethod("isCurrentRouteWithin"),this.isRouteWithin(this.getCurrentRoute(),t)}}]),t}();exports.default=Router;

},{"./history":1,"./routing-table":4,"./util":5}],4:[function(require,module,exports){
"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function recur(e){return function r(t,o,u,n){return void 0===u?r(t,o,{}):"function"==typeof u?r(t,o,{},u):e(t,o,u,n)}}function buildChildren(e){var r=[];if(e){new _powerAssertRecorder,new _powerAssertRecorder;r=e(route)}return r.map(function(e){return e._routingTable instanceof RoutingTable?e._routingTable.route:e})}function routeSplat(e,r){return r=r||{},{type:"splat",route:e,options:r}}function routeRedirect(e,r){return{type:"redirect",path:e,route:r}}function buildTableIndex(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=0;o<e.length;o++){var u=(new _powerAssertRecorder,new _powerAssertRecorder,new _powerAssertRecorder,e[o]);if("redirect"!==u.type){var n=t.concat(u);r[u.route];r[u.route]=n,Array.isArray(u.children)&&buildTableIndex(u.children,r,n)}}return r}function findPathRoute(e,r){"/"===r.charAt(0)&&(r=r.slice(1));var t=void 0,o=void 0,u=void 0;switch(e.type){case"splat":return{route:e,path:""};case"redirect":return e.path===r&&{route:e,path:r};case"param":var n=r.indexOf("/");t=-1!==n?r.slice(0,n):r,u=_defineProperty({},e.param,t),o=r.slice(t.length);break;case"route":if(0!==r.indexOf(e.path))return;t=r.slice(0,e.path.length),o=r.slice(t.length)}if(function(e){return!e||"/"===e}(o))return{route:e,path:r,routeParams:u};var a=e.children;if(Array.isArray(a)){for(var i=void 0,s=0;s<a.length;s++){if(i=findPathRoute(a[s],o))break}if(i){return{path:"/"+t+i.path,route:i.route,routeParams:_extends({},u,i.routeParams)}}}}function buildUrlRoute(e,r,t){var o=(0,_util.getPath)(t),u=findPathRoute(e,o);if(!u)return null;var n=u.route,a=n.options||{},i=a.deserializeQuery,s=a.queryDefaults,l=(0,_util.decodeQueryParams)((0,_util.getQuery)(t)),c=i?i(l):l,p=Object.assign({},s,c),d="",f=u.path,h=u.routeParams,b=void 0===h?{}:h;if("redirect"===n.type){var y=(new _powerAssertRecorder,new _powerAssertRecorder,n.route);"function"==typeof y&&(y=y({routeParams:b,queryParams:p}));var v=y.route,R=r[v],_=R.options||{},m=_.queryDefaults;return _extends({splat:d,routeParams:{}},y,{queryParams:_extends({},m,y.queryParams),redirect:!0})}return"splat"===n.type&&(d=o.slice(f.length)),{route:n.route,splat:d,routeParams:b,queryParams:p}}function pathJoin(e,r){return"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),"/"===r.charAt(0)&&(r=r.slice(1)),e+"/"+r}function buildRouteUrl(e,r){for(var t=(r.route,r.splat),o=r.routeParams,u=r.queryParams,n="",a=void 0,i=0;i<e.length;i++){if(a=e[i],"splat"===a.type){n=pathJoin(n,t||"");break}if("param"!==a.type){if(n=pathJoin(n,a.path),"redirect"===a.type)break}else{new _powerAssertRecorder;n=pathJoin(n,o[a.param])}}var s=a.options||{},l=s.serializeQuery,c=s.queryDefaults,p=l?l(u||{}):u,d=(0,_util.diffFrom)(p,c);return n+(0,_util.encodeQueryParams)(d)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.routeParam=exports.route=void 0;var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,t,o){return t&&e(r.prototype,t),o&&e(r,o),r}}(),_extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},_powerAssertRecorder=function(){function e(){this.captured=[]}return e.prototype._capt=function(e,r){return this.captured.push({value:e,espath:r}),e},e.prototype._expr=function(e,r){var t=this.captured;return this.captured=[],{powerAssertContext:{value:e,events:t},source:r}},e}();exports.recur=recur,exports.buildChildren=buildChildren,exports.routeSplat=routeSplat,exports.routeRedirect=routeRedirect,exports.buildTableIndex=buildTableIndex,exports.findPathRoute=findPathRoute,exports.buildUrlRoute=buildUrlRoute,exports.pathJoin=pathJoin,exports.buildRouteUrl=buildRouteUrl;var _util=require("./util"),route=exports.route=recur(function(e,r,t,o){new _powerAssertRecorder,new _powerAssertRecorder;return{type:"route",path:e,route:r,options:t,children:buildChildren(o)}}),routeParam=exports.routeParam=recur(function(e,r,t,o){return{type:"param",param:e,route:r,options:t,children:buildChildren(o)}});route.param=routeParam,route.splat=routeSplat,route.redirect=routeRedirect;var RoutingTable=function(){function e(r,t,o,u){_classCallCheck(this,e),this.route=route(r,t,o,u),this.index=buildTableIndex([this.route])}return _createClass(e,[{key:"getRouteForUrl",value:function(e){return buildUrlRoute(this.route,this.index,e)}},{key:"getUrlForRoute",value:function(e){var r=this.index[e.route];return r?buildRouteUrl(r,e):null}}]),e}();exports.default=RoutingTable;

},{"./util":5}],5:[function(require,module,exports){
"use strict";function diffFrom(r,e){if(!e)return r;var t={};for(var n in r){var o=r[n];o!==e[n]&&(t[n]=o)}return t}function isProperSubset(r,e){var t=0;for(var n in r){if(r[n]!==e[n])return!1;t++}return t<Object.keys(e).length}function getPath(r){return r.split("?")[0]}function getQuery(r){return r.split("?")[1]}function decodeQueryParams(r){return r&&"?"===r.charAt(0)&&(r=r.slice(1)),r?r.split("&").reduce(function(r,e){var t=e.split("="),n=_slicedToArray(t,2),o=n[0],u=n[1];return r[decodeURIComponent(o)]=decodeURIComponent(u),r},{}):{}}function encodeQueryParams(r){if(!r)return"";var e=Object.keys(r).sort(function(r,e){return r.localeCompare(e)});if(!e.length)return"";for(var t="",n=0;n<e.length;n++){var o=e[n];t+="&"+encodeURIComponent(o);var u=r[o];void 0!==u&&(t+="="+encodeURIComponent(u))}return"?"+t.slice(1)}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function r(r,e){var t=[],n=!0,o=!1,u=void 0;try{for(var i,a=r[Symbol.iterator]();!(n=(i=a.next()).done)&&(t.push(i.value),!e||t.length!==e);n=!0);}catch(r){o=!0,u=r}finally{try{!n&&a.return&&a.return()}finally{if(o)throw u}}return t}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.diffFrom=diffFrom,exports.isProperSubset=isProperSubset,exports.getPath=getPath,exports.getQuery=getQuery,exports.decodeQueryParams=decodeQueryParams,exports.encodeQueryParams=encodeQueryParams;

},{}]},{},[2])(2)
});